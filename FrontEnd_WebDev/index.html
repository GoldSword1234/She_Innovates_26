<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Log In â€” She Innovates</title>
<link rel="stylesheet" href="styles.css">
<link rel="script" href = "script.js">
</head>
<body>

<form class="log-in" id="loginForm">
    <div>
        <label for="username">Username/Email:</label>
        <input type="text" id="username" name="username" required autocomplete="username">
    </div>
    <div>
        <label for="password">Password:</label>
        <input type="password" id="password" name="password" required autocomplete="current-password">
    </div>
    <button type="submit">Log In</button>
</form>

<script>
const form = document.getElementById('loginForm');

form.addEventListener('submit', async (e) => {
    e.preventDefault(); 

    const username = document.getElementById('username').value;
    const password = document.getElementById('password').value;

    try {
        const response = await fetch('https://api.jgao.cc/login', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            credentials: 'include', 
            body: JSON.stringify({ username, password })
        });

        const data = await response.json();

        if (response.ok) {
            alert(`Login successful! Welcome, ${data.username}`);
            // Redirect to homepage or dashboard
            window.location.href = 'home.html';
        } else {
            alert(`Login failed: ${data.error}`);
        }
    } catch (err) {
        console.error(err);
        alert('An error occurred while logging in.');
    }
});

function goToHome() {
   window.location.href = '/';
}

</script>
</body>
</html>
